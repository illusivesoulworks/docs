"use strict";(self.webpackChunkillusivesoulworks_docs=self.webpackChunkillusivesoulworks_docs||[]).push([[1295],{28:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"curios/inventory/basic-inventory","title":"Basic Inventory Management","description":"Learn how to access and manage the Curios inventory attached to an entity.","source":"@site/docs/curios/inventory/basic-inventory.md","sourceDirName":"curios/inventory","slug":"/curios/inventory/basic-inventory","permalink":"/curios/inventory/basic-inventory","draft":false,"unlisted":false,"editUrl":"https://github.com/illusivesoulworks/docs/edit/main/docs/curios/inventory/basic-inventory.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Inventory","permalink":"/category/inventory"},"next":{"title":"API","permalink":"/category/api"}}');var r=t(4848),s=t(8453);t(5537),t(9329);const a={sidebar_position:1},o="Basic Inventory Management",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Using the inventory",id:"using-the-inventory",level:2},{value:"Without external dependencies",id:"without-external-dependencies",level:3},{value:"Accessing the inventory",id:"accessing-the-inventory",level:2},{value:"Accessing the entire inventory",id:"accessing-the-entire-inventory",level:3},{value:"Accessing an inventory for a slot type",id:"accessing-an-inventory-for-a-slot-type",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"basic-inventory-management",children:"Basic Inventory Management"})}),"\n",(0,r.jsx)(n.p,{children:"Learn how to access and manage the Curios inventory attached to an entity."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Each entity that has been assigned any number of slot types based on ",(0,r.jsx)(n.a,{href:"/curios/slots/entity-register",children:"entity registration"}),"\nwill automatically gain a Curios inventory, initialized with a sub-inventory for each slot type that has been assigned.\nThis inventory can be used for a variety of purposes, such as finding out which items are held in the inventory or\nmodifying the number of slots that are in each sub-inventory."]}),"\n",(0,r.jsxs)(n.p,{children:["The interface for the Curios inventory can be found as ",(0,r.jsx)(n.code,{children:"top.theillusivec4.curios.api.type.capability.ICuriosItemHandler"}),",\nwhich holds all the methods that developers can use to access and manage the inventory."]}),"\n",(0,r.jsx)(n.h2,{id:"using-the-inventory",children:"Using the inventory"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["To begin using the inventory, developers will need to grab the instance associated with each entity. The\n",(0,r.jsx)(n.code,{children:"top.theillusivec4.curios.api.CuriosApi"})," class has a ",(0,r.jsx)(n.code,{children:"getCuriosInventory"})," method that can be used:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Optional<ICuriosItemHandler> maybeCuriosInventory = CuriosApi.getCuriosInventory(livingEntity);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The query returns a ",(0,r.jsx)(n.code,{children:"Optional"})," as the specified entity may not have a curios inventory. If the result is certain to\nexist, then the optionality can be disregarded and simplified to:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"ICuriosItemHandler curiosInventory = CuriosApi.getCuriosInventory(livingEntity).get();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Since the method returns an ",(0,r.jsx)(n.code,{children:"Optional"})," by default, developers will need to make sure to use ",(0,r.jsx)(n.code,{children:"Optional#ifPresent"})," first\nin order to check that the inventory actually exists:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"CuriosApi.getCuriosInventory(livingEntity).ifPresent(curiosInventory -> {\n  // code here - with access to the inventory instance that now definitely exists\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once a developer has the ",(0,r.jsx)(n.code,{children:"ICuriosItemHandler"})," instance, they can use the methods from that instance to interact with the\nCurios inventory."]}),"\n",(0,r.jsx)(n.h3,{id:"without-external-dependencies",children:"Without external dependencies"}),"\n",(0,r.jsx)(n.p,{children:"It's possible to access the Curios inventory without a declared dependency on Curios in a developer's mod. This provides\na way to code simple Curios compatibility without needing to manage an additional external dependency on Curios itself\nor any of its classes."}),"\n",(0,r.jsx)(n.p,{children:"In order to do so, first declare a field for the entity capability in any class, like the following example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class CuriosCompatibility {\n\n  public static final EntityCapability<IItemHandler, Void> CURIOS_INVENTORY =\n      EntityCapability.createVoid(ResourceLocation.fromNamespaceAndPath("curios", "item_handler"), IItemHandler.class);\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Since Curios is the one responsible for registering this capability, this is all developers need to do to gain access to\nthe ",(0,r.jsx)(n.code,{children:"IItemHandler"})," instance."]}),"\n",(0,r.jsxs)(n.p,{children:["To retrieve the inventory instance, developers can call the previously declared field like any other capability using\n",(0,r.jsx)(n.code,{children:"LivingEntity#getCapability"})," provided by NeoForge:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"livingEntity.getCapability(CuriosCompatibility.CURIOS_INVENTORY);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This capability, like the native Curios one, is not guaranteed to exist on every instance of ",(0,r.jsx)(n.code,{children:"LivingEntity"})," so an\nadditional ",(0,r.jsx)(n.code,{children:"null"})," check is recommended before accessing the returned ",(0,r.jsx)(n.code,{children:"IItemHandler"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The returned ",(0,r.jsx)(n.code,{children:"IItemHandler"})," ",(0,r.jsx)(n.em,{children:"can"})," be used to modify both the inventory contents and the stack contents using the\nmethods provided in the ",(0,r.jsx)(n.code,{children:"IItemHandler"})," interface. These changes will be reflected back onto the main inventory object."]}),"\n",(0,r.jsx)(n.h2,{id:"accessing-the-inventory",children:"Accessing the inventory"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"As mentioned previously, each slot type assigned to an entity is given a sub-inventory in the Curios inventory to\nprovide easy and categorical access. There are two main ways to interact with these slot inventories, depending on\nwhether the developer wants to access all of the slot inventories or just a particular one."}),"\n",(0,r.jsx)(n.h3,{id:"accessing-the-entire-inventory",children:"Accessing the entire inventory"}),"\n",(0,r.jsxs)(n.p,{children:["The entire Curios inventory exists as a ",(0,r.jsx)(n.code,{children:"Map<String, ICurioStackHandler>"}),", with the slot type identifiers acting as each\nkey and the ",(0,r.jsx)(n.code,{children:"ICurioStackHandler"})," acting as the inventory attached to the slot type. To access this, the ",(0,r.jsx)(n.code,{children:"getCurios"}),"\nmethod can be used:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Map<String, ICurioStackHandler> curios = curiosInventory.getCurios();\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["This returns an ",(0,r.jsx)(n.strong,{children:"unmodifiable"})," map so attempts to change the structure of the map directly through this method, such\nas adding or removing slot inventories, will not work. Any changes to the structure needs to be done through other\nmethods, this method is primarily for accessing the list of slot inventories on the entity."]})}),"\n",(0,r.jsx)(n.p,{children:"From here, developers can either iterate through the entire map:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"curios.forEach((identifier, slotInventory) -> {\n  // code here - with the identifier and slot inventory access\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Or developers can access a particular sub-inventory, such as a slot type with the ",(0,r.jsx)(n.code,{children:'"ring"'})," identifier:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'ICurioStackHandler slotInventory = curios.get("ring");\n\n// null check to ensure that the slot inventory exists\nif (slotInventory != null) {\n  // code here\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"However, if all a developer wants is to access a particular sub-inventory, there's a more straightforward method\noutlined in the next section that can be used instead."}),"\n",(0,r.jsx)(n.h3,{id:"accessing-an-inventory-for-a-slot-type",children:"Accessing an inventory for a slot type"}),"\n",(0,r.jsx)(n.p,{children:"In order to access a particular inventory for slot type, developers can either access the whole inventory as outlined\nin the preceding section or skip straight to a sub-inventory for that slot type:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Optional<ICurioStackHandler> slotInventory = curiosInventory.getStacksHandler("ring");\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The above code will retrive an ",(0,r.jsx)(n.code,{children:"Optional"})," for the slot inventory with the ",(0,r.jsx)(n.code,{children:'"ring"'})," identifier passed into the\nparameter. This is an ",(0,r.jsx)(n.code,{children:"Optional"})," because the slot inventory being queried may not exist on the entity, which is a\npossibility that developers must consider because higher-priority datapacks are capable of removing slot types from\nentities. For that reason, be sure to use ",(0,r.jsx)(n.code,{children:"ifPresent"})," before accessing the inventory:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'curiosInventory.getStacksHandler("ring").ifPresent(slotInventory -> {\n  // code here - with access to the slot inventory with the "ring" identifier\n});\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5537:(e,n,t)=>{t.d(n,{A:()=>I});var i=t(6540),r=t(4164),s=t(5627),a=t(6347),o=t(372),c=t(604),l=t(1861),d=t(8749);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:r}}=e;return{value:n,label:t,attributes:i,default:r}}))}(t);return function(e){const n=(0,l.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function v(e){let{queryString:n=!1,groupId:t}=e;const r=(0,a.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(s),(0,i.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=h(e),[a,c]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:s}))),[l,u]=v({queryString:t,groupId:r}),[y,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,d.Dv)(t);return[r,(0,i.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),m=(()=>{const e=l??y;return p({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{m&&c(m)}),[m]);return{selectedValue:a,selectValue:(0,i.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),g(e)}),[u,g,s]),tabValues:s}}var g=t(9136);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(4848);function b(e){let{className:n,block:t,selectedValue:i,selectValue:a,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),d=e=>{const n=e.currentTarget,t=c.indexOf(n),r=o[t].value;r!==i&&(l(n),a(r))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...s,className:(0,r.A)("tabs__item",m.tabItem,s?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:s}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function j(e){const n=y(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",m.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(x,{...n,...e})]})}function I(e){const n=(0,g.A)();return(0,f.jsx)(j,{...e,children:u(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}},9329:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var i=t(4164);const r={tabItem:"tabItem_Ymn6"};var s=t(4848);function a(e){let{children:n,hidden:t,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,a),hidden:t,children:n})}}}]);